(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"/0+H":function(e,t,n){"use strict";t.__esModule=!0,t.isInAmpMode=a,t.useAmp=function(){return a(s.default.useContext(o.AmpStateContext))};var r,s=(r=n("q1tI"))&&r.__esModule?r:{default:r},o=n("lwAK");function a({ampFirst:e=!1,hybrid:t=!1,hasQuery:n=!1}={}){return e||t&&n}},"0a3R":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return g}));var r=n("rePB"),s=n("q1tI"),o=n.n(s),a=n("yLiY"),i=n.n(a),l=n("8Kt/"),c=n.n(l),u=n("xds5"),f=n("cBaE"),d=n("6KXL"),m=n.n(d),p=n("C9V0");n("4wOh"),n("sR2V");var h=(e,t,n)=>{const r=new IntersectionObserver(e=>{const t=e.filter(e=>e.isIntersecting);t.length>0&&t.map(e=>{const{target:t}=e,n=t.getAttribute("data-attribute");if(n){const e=t.getAttribute(`data-${n}`);t.setAttribute(n,e),t.removeAttribute("data-attribute"),t.removeAttribute(`data-${n}`)}return r.unobserve(t),t})},n);((e,t)=>Array.from((t||document).querySelectorAll(e)))(e,t).forEach(e=>{const t=e.getAttribute("src");return"img"===e.localName?e.setAttribute("src",'data:image/svg+xml;utf8,<?xml version="1.0"?><svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="1280" height="1183"></svg>'):e.removeAttribute("src"),e.setAttribute("data-attribute","src"),e.setAttribute("data-src",t),r.observe(e),e})},_="D:\\WorkSpace\\Blog\\blog-frontend\\pages\\post\\[id].tsx",b=o.a.createElement;const{env:N}=i()().publicRuntimeConfig;class g extends o.a.Component{constructor(e){super(e),Object(r.a)(this,"articleContent",void 0),Object(r.a)(this,"articleCatalog",void 0),this.articleContent=o.a.createRef(),this.articleCatalog=o.a.createRef(),this.state={showCatalog:!1}}static async getInitialProps(e){if("dev"!==N)return window.__NEXT_DATA__.props.pageProps;const{id:t}=e.query;return{article:await Object(u.a)(t)}}componentDidMount(){const{article:e}=this.props,t=document.createElement("div");t.classList.add("markdown-content"),t.innerHTML=e.richtext,h("iframe",t,{rootMargin:"0px 0px -130px 0px"}),h("img",t),this.articleContent.current.append(t);const n=document.createElement("ul");this.articleContent.current.querySelectorAll("h1,h2,h3,h4,h5,h6").forEach(e=>{const t=e.getAttribute("id"),r=e.localName;if(t&&/^h[1-6]$/.test(r)){const s=+r.slice(1),o=document.createElement("li");o.innerText=e.innerText,s>1&&(o.style.marginLeft=`${10*(s-1)}px`,o.style.fontWeight="normal"),s>2&&(o.style.fontSize=`${14-(s-2)}px`);const a=document.createElement("a");a.href=`#${t}`,a.append(o),n.append(a)}}),n.hasChildNodes()&&this.setState({showCatalog:!0},()=>{this.articleCatalog.current.append(n)})}render(){const{article:e}=this.props,{showCatalog:t}=this.state;return b("div",{className:m.a.container,__self:this,__source:{fileName:_,lineNumber:88,columnNumber:7}},b(c.a,{__self:this,__source:{fileName:_,lineNumber:89,columnNumber:9}},b("title",{__self:this,__source:{fileName:_,lineNumber:90,columnNumber:11}},`${e.title} - WDNMD - ChrisChan`)),b("div",{ref:this.articleContent,className:m.a.article,__self:this,__source:{fileName:_,lineNumber:92,columnNumber:9}},b("div",{className:m.a["article-head"],__self:this,__source:{fileName:_,lineNumber:93,columnNumber:11}},b("span",{__self:this,__source:{fileName:_,lineNumber:94,columnNumber:13}},Object(f.a)(e.postedAt)),b("span",{__self:this,__source:{fileName:_,lineNumber:95,columnNumber:13}},"\xa0\xb7\xa0"),e.labels.map(e=>b(p.a,{key:e._id,href:`/tag/${e.parent?`${e.parent.alias}/`:""}${e.alias}`,label:e.label,className:m.a["article-label"],__self:this,__source:{fileName:_,lineNumber:98,columnNumber:17}}))),b("div",{className:m.a["article-head"],__self:this,__source:{fileName:_,lineNumber:107,columnNumber:11}},b("span",{__self:this,__source:{fileName:_,lineNumber:108,columnNumber:13}},"\u6700\u8fd1\u66f4\u65b0"),b("span",{__self:this,__source:{fileName:_,lineNumber:109,columnNumber:13}},"\xa0\xb7\xa0"),b("span",{__self:this,__source:{fileName:_,lineNumber:110,columnNumber:13}},Object(f.a)(e.updatedAt))),e.cover&&b("img",{src:e.cover,alt:e.title,className:m.a["article-cover"],__self:this,__source:{fileName:_,lineNumber:114,columnNumber:15}}),b("h1",{className:m.a["article-title"],__self:this,__source:{fileName:_,lineNumber:117,columnNumber:11}},e.title)),b("div",{className:m.a.categories,__self:this,__source:{fileName:_,lineNumber:119,columnNumber:9}},b("div",{ref:this.articleCatalog,className:m.a["categories-wrap"],__self:this,__source:{fileName:_,lineNumber:120,columnNumber:11}},t&&b("span",{__self:this,__source:{fileName:_,lineNumber:121,columnNumber:29}},"\u76ee\u5f55"))),b("style",{__self:this,__source:{fileName:_,lineNumber:124,columnNumber:9}},"\n            .markdown-content h1,\n            .markdown-content h2,\n            .markdown-content h3,\n            .markdown-content h4,\n            .markdown-content h5,\n            .markdown-content h6 {\n              margin-top: calc(1em - 80px);\n              padding-top: 80px;\n            }\n          "))}}},"8Kt/":function(e,t,n){"use strict";t.__esModule=!0,t.defaultHead=c,t.default=void 0;var r=l(n("q1tI")),s=l(n("Xuae")),o=n("lwAK"),a=n("FYa8"),i=n("/0+H");function l(e){return e&&e.__esModule?e:{default:e}}function c(e=!1){const t=[r.default.createElement("meta",{charSet:"utf-8"})];return e||t.push(r.default.createElement("meta",{name:"viewport",content:"width=device-width"})),t}function u(e,t){return"string"===typeof t||"number"===typeof t?e:t.type===r.default.Fragment?e.concat(r.default.Children.toArray(t.props.children).reduce((e,t)=>"string"===typeof t||"number"===typeof t?e:e.concat(t),[])):e.concat(t)}const f=["name","httpEquiv","charSet","itemProp"];function d(e,t){return e.reduce((e,t)=>{const n=r.default.Children.toArray(t.props.children);return e.concat(n)},[]).reduce(u,[]).reverse().concat(c(t.inAmpMode)).filter(function(){const e=new Set,t=new Set,n=new Set,r={};return s=>{let o=!0;if(s.key&&"number"!==typeof s.key&&s.key.indexOf("$")>0){const t=s.key.slice(s.key.indexOf("$")+1);e.has(t)?o=!1:e.add(t)}switch(s.type){case"title":case"base":t.has(s.type)?o=!1:t.add(s.type);break;case"meta":for(let e=0,t=f.length;e<t;e++){const t=f[e];if(s.props.hasOwnProperty(t))if("charSet"===t)n.has(t)?o=!1:n.add(t);else{const e=s.props[t],n=r[t]||new Set;n.has(e)?o=!1:(n.add(e),r[t]=n)}}}return o}}()).reverse().map((e,t)=>{const n=e.key||t;return r.default.cloneElement(e,{key:n})})}const m=(0,s.default)();function p({children:e}){return r.default.createElement(o.AmpStateContext.Consumer,null,t=>r.default.createElement(a.HeadManagerContext.Consumer,null,n=>r.default.createElement(m,{reduceComponentsToState:d,handleStateChange:n,inAmpMode:(0,i.isInAmpMode)(t)},e)))}p.rewind=m.rewind;var h=p;t.default=h},C9V0:function(e,t,n){"use strict";var r=n("q1tI"),s=n.n(r),o=n("yLiY"),a=n.n(o),i=n("YFqc"),l=n.n(i),c="D:\\WorkSpace\\Blog\\blog-frontend\\components\\Link\\index.tsx",u=s.a.createElement;const{env:f}=a()().publicRuntimeConfig;t.a=e=>{const{href:t,alias:n,label:r,className:s="",children:o}=e;if("dev"===f)return u(l.a,{href:t,__self:void 0,__source:{fileName:c,lineNumber:22,columnNumber:7}},o||u("span",{className:s,__self:void 0,__source:{fileName:c,lineNumber:24,columnNumber:23}},r));const a=`/wdnmd${n||t.toString()}`;return u("a",{href:a,style:{textDecoration:"none"},className:s,__self:void 0,__source:{fileName:c,lineNumber:32,columnNumber:5}},o||r)}},FYa8:function(e,t,n){"use strict";var r;t.__esModule=!0,t.HeadManagerContext=void 0;const s=((r=n("q1tI"))&&r.__esModule?r:{default:r}).default.createContext(null);t.HeadManagerContext=s},Xuae:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n("q1tI");t.default=()=>{const e=new Set;let t;function n(n){t=n.props.reduceComponentsToState([...e],n.props),n.props.handleStateChange&&n.props.handleStateChange(t)}return class extends r.Component{static rewind(){const n=t;return t=void 0,e.clear(),n}constructor(e){super(e)}componentDidMount(){e.add(this),n(this)}componentDidUpdate(){n(this)}componentWillUnmount(){e.delete(this),n(this)}render(){return null}}}},YFqc:function(e,t,n){e.exports=n("cTJO")},cBaE:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));const r=(e,t,n)=>{const r={};if(t){const s=e.find(e=>!e.parent&&e.alias===t);let o;n&&(o=e.find(e=>e.parent===s._id&&e.alias===n)),r.parent=s?s._id:"",r.child=o?o._id:"",r.parentEntity=s,r.childEntity=o}return r},s=(e,t=2)=>`${e}`.padStart(2,"0"),o=e=>{const t=new Date(e),n=new Date,r=(+n-t.getTime())/1e3;return r<30?"\u521a\u521a":r<3600?`${Math.ceil(r/60)}\u5206\u949f\u524d`:r<86400?`${Math.ceil(r/3600)}\u5c0f\u65f6\u524d`:r<=604800?`${Math.floor(r/86400)}\u5929\u524d`:n.getFullYear()===t.getFullYear()?`${s(t.getMonth()+1)}-${s(t.getDate())} ${s(t.getHours())}:${s(t.getMinutes())}`:`${t.getFullYear()}-${s(t.getMonth()+1)}-${s(t.getDate())} ${s(t.getHours())}:${s(t.getMinutes())}`}},cTJO:function(e,t,n){"use strict";var r=n("TqRt"),s=n("284h");t.__esModule=!0,t.default=void 0;var o=s(n("q1tI")),a=n("QmWs"),i=n("g/15"),l=r(n("nOHt")),c=n("elyg");function u(e){return e&&"object"===typeof e?(0,i.formatWithValidation)(e):e}let f;const d=new Map,m=window.IntersectionObserver,p={};function h(){return f||(m?f=new m(e=>{e.forEach(e=>{if(!d.has(e.target))return;const t=d.get(e.target);(e.isIntersecting||e.intersectionRatio>0)&&(f.unobserve(e.target),d.delete(e.target),t())})},{rootMargin:"200px"}):void 0)}const _=(e,t)=>{const n=h();return n?(n.observe(e),d.set(e,t),()=>{try{n.unobserve(e)}catch(t){console.error(t)}d.delete(e)}):()=>{}};class b extends o.Component{constructor(e){super(e),this.p=void 0,this.cleanUpListeners=()=>{},this.formatUrls=function(e){let t=null,n=null,r=null;return(s,o)=>{if(r&&s===t&&o===n)return r;const a=e(s,o);return t=s,n=o,r=a,a}}((e,t)=>({href:(0,c.addBasePath)(u(e)),as:t?(0,c.addBasePath)(u(t)):t})),this.linkClicked=e=>{const{nodeName:t,target:n}=e.currentTarget;if("A"===t&&(n&&"_self"!==n||e.metaKey||e.ctrlKey||e.shiftKey||e.nativeEvent&&2===e.nativeEvent.which))return;let{href:r,as:s}=this.formatUrls(this.props.href,this.props.as);if(!function(e){const t=(0,a.parse)(e,!1,!0),n=(0,a.parse)((0,i.getLocationOrigin)(),!1,!0);return!t.host||t.protocol===n.protocol&&t.host===n.host}(r))return;const{pathname:o}=window.location;r=(0,a.resolve)(o,r),s=s?(0,a.resolve)(o,s):r,e.preventDefault();let{scroll:c}=this.props;null==c&&(c=s.indexOf("#")<0),l.default[this.props.replace?"replace":"push"](r,s,{shallow:this.props.shallow}).then(e=>{e&&c&&(window.scrollTo(0,0),document.body.focus())})},this.p=!1!==e.prefetch}componentWillUnmount(){this.cleanUpListeners()}getPaths(){const{pathname:e}=window.location,{href:t,as:n}=this.formatUrls(this.props.href,this.props.as),r=(0,a.resolve)(e,t);return[r,n?(0,a.resolve)(e,n):r]}handleRef(e){if(this.p&&m&&e&&e.tagName){this.cleanUpListeners(),p[this.getPaths().join("%")]||(this.cleanUpListeners=_(e,()=>{this.prefetch()}))}}prefetch(e){if(!this.p)return;const t=this.getPaths();l.default.prefetch(t[0],t[1],e).catch(e=>{0}),p[t.join("%")]=!0}render(){let{children:e}=this.props;const{href:t,as:r}=this.formatUrls(this.props.href,this.props.as);"string"===typeof e&&(e=o.default.createElement("a",null,e));const s=o.Children.only(e),a={ref:e=>{this.handleRef(e),s&&"object"===typeof s&&s.ref&&("function"===typeof s.ref?s.ref(e):"object"===typeof s.ref&&(s.ref.current=e))},onMouseEnter:e=>{s.props&&"function"===typeof s.props.onMouseEnter&&s.props.onMouseEnter(e),this.prefetch({priority:!0})},onClick:e=>{s.props&&"function"===typeof s.props.onClick&&s.props.onClick(e),e.defaultPrevented||this.linkClicked(e)}};!this.props.passHref&&("a"!==s.type||"href"in s.props)||(a.href=r||t);{const e=n("P5f7").rewriteUrlForNextExport;a.href&&"undefined"!==typeof __NEXT_DATA__&&__NEXT_DATA__.nextExport&&(a.href=e(a.href))}return o.default.cloneElement(s,a)}}var N=b;t.default=N},lwAK:function(e,t,n){"use strict";var r;t.__esModule=!0,t.AmpStateContext=void 0;const s=((r=n("q1tI"))&&r.__esModule?r:{default:r}).default.createContext({});t.AmpStateContext=s},rePB:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},vcXL:function(e,t,n){"use strict";var r=self.fetch.bind(self);e.exports=r,e.exports.default=e.exports},wcuJ:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/post/[id]",function(){return n("0a3R")}])},xds5:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u}));var r=n("vcXL"),s=n.n(r);var o=async e=>{const t=await s()(`http://localhost:1213/api${e}`);if(200!==t.status)return Promise.reject(new Error("\u8bf7\u6c42\u5931\u8d25"));const n=await t.json();return 200!==n.code?Promise.reject(new Error(n.message||"\u8bf7\u6c42\u5931\u8d25")):Promise.resolve(n.data)};const a=()=>o("/labels"),i=()=>o("/profile"),l=()=>o("/heatmap"),c=e=>o(`/articles${e?`?label=${e}`:""}`),u=e=>o(`/articles/${e}`)}},[["wcuJ",0,1,2,3]]]);