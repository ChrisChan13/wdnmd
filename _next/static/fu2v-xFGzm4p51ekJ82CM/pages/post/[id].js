(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"/0+H":function(e,t,n){"use strict";t.__esModule=!0,t.isInAmpMode=a,t.useAmp=function(){return a(o.default.useContext(s.AmpStateContext))};var r,o=(r=n("q1tI"))&&r.__esModule?r:{default:r},s=n("lwAK");function a({ampFirst:e=!1,hybrid:t=!1,hasQuery:n=!1}={}){return e||t&&n}},"0a3R":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return g}));var r=n("rePB"),o=n("q1tI"),s=n.n(o),a=n("yLiY"),i=n.n(a),c=n("8Kt/"),l=n.n(c),u=n("xds5"),f=n("cBaE"),d=n("6KXL"),p=n.n(d),h=n("C9V0");n("4wOh"),n("sR2V");var m=(e,t,n,r)=>{const o=new IntersectionObserver(e=>{const t=e[0];t.intersectionRatio>0&&(r(t.target),o.unobserve(t.target))});((e,t)=>Array.from((t||document).querySelectorAll(e)))(e,t).forEach(e=>(n(e),o.observe(e),e))},_="D:\\WorkSpace\\Blog\\blog-frontend\\pages\\post\\[id].tsx",b=s.a.createElement;const{env:N}=i()().publicRuntimeConfig;class g extends s.a.Component{constructor(e){super(e),Object(r.a)(this,"articleContent",void 0),Object(r.a)(this,"articleCatalog",void 0),this.articleContent=s.a.createRef(),this.articleCatalog=s.a.createRef(),this.state={showCatalog:!1}}static async getInitialProps(e){if("dev"!==N)return window.__NEXT_DATA__.props.pageProps;const{id:t}=e.query;return{article:await Object(u.a)(t)}}componentDidMount(){const{article:e}=this.props,t=document.createElement("div");t.classList.add("markdown-content"),t.innerHTML=e.richtext,this.articleContent.current.append(t),m("#iframe",t,e=>(e.getElementsByTagName("iframe")[0].style.display="none",0),e=>(e.getElementsByTagName("iframe")[0].style.display="block",1));const n=document.createElement("ul");this.articleContent.current.querySelectorAll("h1,h2,h3,h4,h5,h6").forEach(e=>{const t=e.getAttribute("id"),r=e.localName;if(t&&/^h[1-6]$/.test(r)){const o=+r.slice(1),s=document.createElement("li");s.innerText=e.innerText,o>1&&(s.style.marginLeft=`${10*(o-1)}px`,s.style.fontWeight="normal"),o>2&&(s.style.fontSize=`${14-(o-2)}px`);const a=document.createElement("a");a.href=`#${t}`,a.append(s),n.append(a)}}),n.hasChildNodes()&&this.setState({showCatalog:!0},()=>{this.articleCatalog.current.append(n)})}render(){const{article:e}=this.props,{showCatalog:t}=this.state;return b("div",{className:p.a.container,__self:this,__source:{fileName:_,lineNumber:91,columnNumber:7}},b(l.a,{__self:this,__source:{fileName:_,lineNumber:92,columnNumber:9}},b("title",{__self:this,__source:{fileName:_,lineNumber:93,columnNumber:11}},`${e.title} - WDNMD - ChrisChan`)),b("div",{ref:this.articleContent,className:p.a.article,__self:this,__source:{fileName:_,lineNumber:95,columnNumber:9}},b("div",{className:p.a["article-head"],__self:this,__source:{fileName:_,lineNumber:96,columnNumber:11}},b("span",{__self:this,__source:{fileName:_,lineNumber:97,columnNumber:13}},Object(f.a)(e.postedAt)),b("span",{__self:this,__source:{fileName:_,lineNumber:98,columnNumber:13}},"\xa0\xb7\xa0"),e.labels.map(e=>b(h.a,{key:e._id,href:`/category/${e.parent?`${e.parent.alias}/`:""}${e.alias}`,label:e.label,className:p.a["article-label"],__self:this,__source:{fileName:_,lineNumber:101,columnNumber:17}}))),e.cover&&b("img",{src:e.cover,alt:e.title,className:p.a["article-cover"],__self:this,__source:{fileName:_,lineNumber:112,columnNumber:15}}),b("h1",{className:p.a["article-title"],__self:this,__source:{fileName:_,lineNumber:115,columnNumber:11}},e.title)),b("div",{className:p.a.categories,__self:this,__source:{fileName:_,lineNumber:117,columnNumber:9}},b("div",{ref:this.articleCatalog,className:p.a["categories-wrap"],__self:this,__source:{fileName:_,lineNumber:118,columnNumber:11}},t&&b("span",{__self:this,__source:{fileName:_,lineNumber:119,columnNumber:29}},"\u76ee\u5f55"))),b("style",{__self:this,__source:{fileName:_,lineNumber:122,columnNumber:9}},"\n            .markdown-content h1,\n            .markdown-content h2,\n            .markdown-content h3,\n            .markdown-content h4,\n            .markdown-content h5,\n            .markdown-content h6 {\n              margin-top: calc(1em - 80px);\n              padding-top: 80px;\n            }\n          "))}}},"8Kt/":function(e,t,n){"use strict";t.__esModule=!0,t.defaultHead=l,t.default=void 0;var r=c(n("q1tI")),o=c(n("Xuae")),s=n("lwAK"),a=n("FYa8"),i=n("/0+H");function c(e){return e&&e.__esModule?e:{default:e}}function l(e=!1){const t=[r.default.createElement("meta",{charSet:"utf-8"})];return e||t.push(r.default.createElement("meta",{name:"viewport",content:"width=device-width"})),t}function u(e,t){return"string"===typeof t||"number"===typeof t?e:t.type===r.default.Fragment?e.concat(r.default.Children.toArray(t.props.children).reduce((e,t)=>"string"===typeof t||"number"===typeof t?e:e.concat(t),[])):e.concat(t)}const f=["name","httpEquiv","charSet","itemProp"];function d(e,t){return e.reduce((e,t)=>{const n=r.default.Children.toArray(t.props.children);return e.concat(n)},[]).reduce(u,[]).reverse().concat(l(t.inAmpMode)).filter(function(){const e=new Set,t=new Set,n=new Set,r={};return o=>{let s=!0;if(o.key&&"number"!==typeof o.key&&o.key.indexOf("$")>0){const t=o.key.slice(o.key.indexOf("$")+1);e.has(t)?s=!1:e.add(t)}switch(o.type){case"title":case"base":t.has(o.type)?s=!1:t.add(o.type);break;case"meta":for(let e=0,t=f.length;e<t;e++){const t=f[e];if(o.props.hasOwnProperty(t))if("charSet"===t)n.has(t)?s=!1:n.add(t);else{const e=o.props[t],n=r[t]||new Set;n.has(e)?s=!1:(n.add(e),r[t]=n)}}}return s}}()).reverse().map((e,t)=>{const n=e.key||t;return r.default.cloneElement(e,{key:n})})}const p=(0,o.default)();function h({children:e}){return r.default.createElement(s.AmpStateContext.Consumer,null,t=>r.default.createElement(a.HeadManagerContext.Consumer,null,n=>r.default.createElement(p,{reduceComponentsToState:d,handleStateChange:n,inAmpMode:(0,i.isInAmpMode)(t)},e)))}h.rewind=p.rewind;var m=h;t.default=m},C9V0:function(e,t,n){"use strict";var r=n("q1tI"),o=n.n(r),s=n("yLiY"),a=n.n(s),i=n("YFqc"),c=n.n(i),l="D:\\WorkSpace\\Blog\\blog-frontend\\components\\Link\\index.tsx",u=o.a.createElement;const{env:f}=a()().publicRuntimeConfig;t.a=e=>{const{href:t,alias:n,label:r,className:o="",children:s}=e;if("dev"===f)return u(c.a,{href:t,__self:void 0,__source:{fileName:l,lineNumber:22,columnNumber:7}},s||u("span",{className:o,__self:void 0,__source:{fileName:l,lineNumber:24,columnNumber:23}},r));const a=`/wdnmd${n||t.toString()}`;return u("a",{href:a,style:{textDecoration:"none"},className:o,__self:void 0,__source:{fileName:l,lineNumber:32,columnNumber:5}},s||r)}},FYa8:function(e,t,n){"use strict";var r;t.__esModule=!0,t.HeadManagerContext=void 0;const o=((r=n("q1tI"))&&r.__esModule?r:{default:r}).default.createContext(null);t.HeadManagerContext=o},Xuae:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n("q1tI");t.default=()=>{const e=new Set;let t;function n(n){t=n.props.reduceComponentsToState([...e],n.props),n.props.handleStateChange&&n.props.handleStateChange(t)}return class extends r.Component{static rewind(){const n=t;return t=void 0,e.clear(),n}constructor(e){super(e)}componentDidMount(){e.add(this),n(this)}componentDidUpdate(){n(this)}componentWillUnmount(){e.delete(this),n(this)}render(){return null}}}},YFqc:function(e,t,n){e.exports=n("cTJO")},cBaE:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));const r=(e,t,n)=>{const r={};if(t){const o=e.find(e=>!e.parent&&e.alias===t);let s;n&&(s=e.find(e=>e.parent===o._id&&e.alias===n)),r.parent=o?o._id:"",r.child=s?s._id:"",r.parentEntity=o,r.childEntity=s}return r},o=e=>{const t=new Date(e),n=(Date.now()-t.getTime())/1e3;return n<30?"\u521a\u521a":n<3600?`${Math.ceil(n/60)}\u5206\u949f\u524d`:n<86400?`${Math.ceil(n/3600)}\u5c0f\u65f6\u524d`:n<=604800?`${Math.floor(n/86400)}\u5929\u524d`:`${t.getMonth()+1}\u6708${t.getDate()}\u65e5${t.getHours()}\u65f6${t.getMinutes()}\u5206`}},cTJO:function(e,t,n){"use strict";var r=n("TqRt"),o=n("284h");t.__esModule=!0,t.default=void 0;var s=o(n("q1tI")),a=n("QmWs"),i=n("g/15"),c=r(n("nOHt")),l=n("elyg");function u(e){return e&&"object"===typeof e?(0,i.formatWithValidation)(e):e}let f;const d=new Map,p=window.IntersectionObserver,h={};function m(){return f||(p?f=new p(e=>{e.forEach(e=>{if(!d.has(e.target))return;const t=d.get(e.target);(e.isIntersecting||e.intersectionRatio>0)&&(f.unobserve(e.target),d.delete(e.target),t())})},{rootMargin:"200px"}):void 0)}const _=(e,t)=>{const n=m();return n?(n.observe(e),d.set(e,t),()=>{try{n.unobserve(e)}catch(t){console.error(t)}d.delete(e)}):()=>{}};class b extends s.Component{constructor(e){super(e),this.p=void 0,this.cleanUpListeners=()=>{},this.formatUrls=function(e){let t=null,n=null,r=null;return(o,s)=>{if(r&&o===t&&s===n)return r;const a=e(o,s);return t=o,n=s,r=a,a}}((e,t)=>({href:(0,l.addBasePath)(u(e)),as:t?(0,l.addBasePath)(u(t)):t})),this.linkClicked=e=>{const{nodeName:t,target:n}=e.currentTarget;if("A"===t&&(n&&"_self"!==n||e.metaKey||e.ctrlKey||e.shiftKey||e.nativeEvent&&2===e.nativeEvent.which))return;let{href:r,as:o}=this.formatUrls(this.props.href,this.props.as);if(!function(e){const t=(0,a.parse)(e,!1,!0),n=(0,a.parse)((0,i.getLocationOrigin)(),!1,!0);return!t.host||t.protocol===n.protocol&&t.host===n.host}(r))return;const{pathname:s}=window.location;r=(0,a.resolve)(s,r),o=o?(0,a.resolve)(s,o):r,e.preventDefault();let{scroll:l}=this.props;null==l&&(l=o.indexOf("#")<0),c.default[this.props.replace?"replace":"push"](r,o,{shallow:this.props.shallow}).then(e=>{e&&l&&(window.scrollTo(0,0),document.body.focus())})},this.p=!1!==e.prefetch}componentWillUnmount(){this.cleanUpListeners()}getPaths(){const{pathname:e}=window.location,{href:t,as:n}=this.formatUrls(this.props.href,this.props.as),r=(0,a.resolve)(e,t);return[r,n?(0,a.resolve)(e,n):r]}handleRef(e){if(this.p&&p&&e&&e.tagName){this.cleanUpListeners(),h[this.getPaths().join("%")]||(this.cleanUpListeners=_(e,()=>{this.prefetch()}))}}prefetch(e){if(!this.p)return;const t=this.getPaths();c.default.prefetch(t[0],t[1],e).catch(e=>{0}),h[t.join("%")]=!0}render(){let{children:e}=this.props;const{href:t,as:r}=this.formatUrls(this.props.href,this.props.as);"string"===typeof e&&(e=s.default.createElement("a",null,e));const o=s.Children.only(e),a={ref:e=>{this.handleRef(e),o&&"object"===typeof o&&o.ref&&("function"===typeof o.ref?o.ref(e):"object"===typeof o.ref&&(o.ref.current=e))},onMouseEnter:e=>{o.props&&"function"===typeof o.props.onMouseEnter&&o.props.onMouseEnter(e),this.prefetch({priority:!0})},onClick:e=>{o.props&&"function"===typeof o.props.onClick&&o.props.onClick(e),e.defaultPrevented||this.linkClicked(e)}};!this.props.passHref&&("a"!==o.type||"href"in o.props)||(a.href=r||t);{const e=n("P5f7").rewriteUrlForNextExport;a.href&&"undefined"!==typeof __NEXT_DATA__&&__NEXT_DATA__.nextExport&&(a.href=e(a.href))}return s.default.cloneElement(o,a)}}var N=b;t.default=N},lwAK:function(e,t,n){"use strict";var r;t.__esModule=!0,t.AmpStateContext=void 0;const o=((r=n("q1tI"))&&r.__esModule?r:{default:r}).default.createContext({});t.AmpStateContext=o},rePB:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},vcXL:function(e,t,n){"use strict";var r=self.fetch.bind(self);e.exports=r,e.exports.default=e.exports},wcuJ:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/post/[id]",function(){return n("0a3R")}])},xds5:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return u}));var r=n("vcXL"),o=n.n(r);var s=async e=>{const t=await o()(`http://localhost:1213/api${e}`);if(200!==t.status)return Promise.reject(new Error("\u8bf7\u6c42\u5931\u8d25"));const n=await t.json();return 200!==n.code?Promise.reject(new Error(n.message||"\u8bf7\u6c42\u5931\u8d25")):Promise.resolve(n.data)};const a=()=>s("/labels"),i=()=>s("/profile"),c=()=>s("/heatmap"),l=e=>s(`/articles${e?`?label=${e}`:""}`),u=e=>s(`/articles/${e}`)}},[["wcuJ",0,1,2,3]]]);